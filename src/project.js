window.__require=function t(e,o,a){function n(s,r){if(!o[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var d="function"==typeof __require&&__require;if(!r&&d)return d(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var l=o[s]={exports:{}};e[s][0].call(l.exports,function(t){return n(e[s][1][t]||t)},l,l.exports,t,e,o,a)}return o[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<a.length;s++)n(a[s]);return n}({card:[function(t,e,o){"use strict";cc._RF.push(e,"2afe8rz92BOl7CbQfKSCoLh","card");var a=function(t){return t&&t.__esModule?t:{default:t}}(t("../../mygolbal.js"));cc.Class({extends:cc.Component,properties:{cards_sprite_atlas:cc.SpriteAtlas},onLoad:function(){this.flag=!1,this.offset_y=20,this.node.on("reset_card_flag",function(t){1==flag&&(flag=!1,this.node.y-=this.offset_y)}.bind(this))},runToCenter:function(){},start:function(){},init_data:function(t){},setTouchEvent:function(){this.accountid==a.default.playerData.accountID&&this.node.on(cc.Node.EventType.TOUCH_START,function(t){var e=this.node.parent;if(e.getComponent("gameScene").roomstate==RoomState.ROOM_PLAYING)if(console.log("TOUCH_START id:"+this.card_id),0==this.flag){this.flag=!0,this.node.y+=this.offset_y;var o={cardid:this.card_id,card_data:this.card_data};e.emit("choose_card_event",o)}else this.flag=!1,this.node.y-=this.offset_y,e.emit("unchoose_card_event",this.card_id)}.bind(this))},showCards:function(t,e){this.card_id=t.index,this.card_data=t,e&&(this.accountid=e);var o="";o=t.shape?"card_"+(13*{1:3,2:2,3:1,4:0}[t.shape]+{12:1,13:2,1:3,2:4,3:5,4:6,5:7,6:8,7:9,8:10,9:11,10:12,11:13}[t.value]):"card_"+{14:54,15:53}[t.king],this.node.getComponent(cc.Sprite).spriteFrame=this.cards_sprite_atlas.getSpriteFrame(o),this.setTouchEvent()}}),cc._RF.pop()},{"../../mygolbal.js":"mygolbal"}],creatRoom:[function(t,e,o){"use strict";cc._RF.push(e,"e85c8xPVuxKX5zdxLJ1e12h","creatRoom");var a=function(t){return t&&t.__esModule?t:{default:t}}(t("../../mygolbal.js"));cc.Class({extends:cc.Component,properties:{},start:function(){},_createroom:function(t){if(t<0||t>4)console.log("create room rate error"+t);else{var e=0;1==t?e=10:2==t?e=20:3==t?e=30:4==t&&(e=40);var o={global:e,rate:t};a.default.socket.request_creatroom(o,function(t,e){0!=t?console.log("create_room err:"+t):(console.log("create_room"+JSON.stringify(e)),a.default.playerData.bottom=e.bottom,a.default.playerData.rate=e.rate,cc.director.loadScene("gameScene"))})}},onButtonClick:function(t,e){switch(e){case"create_room_1":this._createroom(1);break;case"create_room_2":this._createroom(2);break;case"create_room_3":this._createroom(3);break;case"create_room_4":this._createroom(4);break;case"create_room_close":this.node.destroy()}this.node.destroy()}}),cc._RF.pop()},{"../../mygolbal.js":"mygolbal"}],event_lister:[function(t,e,o){"use strict";cc._RF.push(e,"d485eyCsiBLBqweDM7SjVQh","event_lister"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=function(t){var e={};return t.on=function(t,o){e.hasOwnProperty(t)?e[t].push(o):e[t]=[o]},t.fire=function(t){if(e.hasOwnProperty(t))for(var o=e[t],a=0;a<o.length;++a){var n=o[a],i=[];for(a=1;a<arguments.length;++a)i.push(arguments[a]);console.log("handle.call(this,args) type:"+t),n.apply(this,i)}},t.removeLister=function(t){e[t]=[]},t.removeAllLister=function(){e={}},t};o.default=a,e.exports=o.default,cc._RF.pop()},{}],gameScene:[function(t,e,o){"use strict";cc._RF.push(e,"cf22aez0/xDaaC1kRqxn/pw","gameScene"),cc.Class({extends:cc.Component,properties:{di_label:cc.Label,beishu_label:cc.Label,roomid_label:cc.Label,player_node_prefabs:cc.Prefab,players_seat_pos:cc.Node},gameEnd:function(){},onLoad:function(){console.log(myglobal,"333"),this.playerNodeList=[],this.di_label.string="\u5e95:"+window.myglobal.playerData.bottom||1,this.beishu_label.string="\u500d\u6570:"+window.myglobal.playerData.rate||1,this.roomstate=RoomState.ROOM_INVALID,this.node.on("pushcard_other_event",function(){console.log("gamescene pushcard_other_event");for(var t=0;t<this.playerNodeList.length;t++){var e=this.playerNodeList[t];e&&e.emit("push_card_event")}}.bind(this)),window.myglobal.socket.onRoomChangeState(function(t){console.log("onRoomChangeState:"+t),this.roomstate=t}.bind(this)),this.node.on("canrob_event",function(t){console.log("gamescene canrob_event:"+t);for(var e=0;e<this.playerNodeList.length;e++){var o=this.playerNodeList[e];o&&o.emit("playernode_canrob_event",t)}}.bind(this)),this.node.on("choose_card_event",function(t){console.log("--------choose_card_event-----------");var e=this.node.getChildByName("gameingUI");null!=e?e.emit("choose_card_event",t):console.log("get childer name gameingUI")}.bind(this)),this.node.on("unchoose_card_event",function(t){console.log("--------unchoose_card_event-----------");var e=this.node.getChildByName("gameingUI");null!=e?e.emit("unchoose_card_event",t):console.log("get childer name gameingUI")}.bind(this)),window.myglobal.socket.request_enter_room({},function(t,e){if(console.log("enter_room_resp"+JSON.stringify(e)),0!=t)console.log("enter_room_resp err:"+t);else{var o=e.seatindex;this.playerdata_list_pos=[],this.setPlayerSeatPos(o);var a=e.playerdata,n=e.roomid;this.roomid_label.string="\u623f\u95f4\u53f7:"+n,window.myglobal.playerData.housemanageid=e.housemanageid;for(var i=0;i<a.length;i++)this.addPlayerNode(a[i]);isopen_sound&&(cc.audioEngine.stopAll(),cc.audioEngine.play(cc.url.raw("resources/sound/bg.mp3"),!0))}this.node.getChildByName("gamebeforeUI").emit("init")}.bind(this)),window.myglobal.socket.onPlayerJoinRoom(function(t){console.log("onPlayerJoinRoom:"+JSON.stringify(t)),this.addPlayerNode(t)}.bind(this)),window.myglobal.socket.onPlayerReady(function(t){console.log("-------onPlayerReady:"+t);for(var e=0;e<this.playerNodeList.length;e++){var o=this.playerNodeList[e];o&&o.emit("player_ready_notify",t)}}.bind(this)),window.myglobal.socket.onGameStart(function(){for(var t=0;t<this.playerNodeList.length;t++){var e=this.playerNodeList[t];e&&e.emit("gamestart_event")}var o=this.node.getChildByName("gamebeforeUI");o&&(o.active=!1)}.bind(this)),window.myglobal.socket.onRobState(function(t){console.log("-----onRobState"+JSON.stringify(t));for(var e=0;e<this.playerNodeList.length;e++){var o=this.playerNodeList[e];o&&o.emit("playernode_rob_state_event",t)}}.bind(this)),window.myglobal.socket.onChangeMaster(function(t){console.log("onChangeMaster"+t),window.myglobal.playerData.master_accountid=t;for(var e=0;e<this.playerNodeList.length;e++){var o=this.playerNodeList[e];o&&o.emit("playernode_changemaster_event",t)}}.bind(this)),window.myglobal.socket.onShowBottomCard(function(t){console.log("onShowBottomCard---------"+t);var e=this.node.getChildByName("gameingUI");null!=e?e.emit("show_bottom_card_event",t):console.log("get childer name gameingUI")}.bind(this))},setPlayerSeatPos:function(t){if(t<1||t>3)console.log("seat_index error"+t);else switch(console.log("setPlayerSeatPos seat_index:"+t),t){case 1:this.playerdata_list_pos[1]=0,this.playerdata_list_pos[2]=1,this.playerdata_list_pos[3]=2;break;case 2:this.playerdata_list_pos[2]=0,this.playerdata_list_pos[3]=1,this.playerdata_list_pos[1]=2;break;case 3:this.playerdata_list_pos[3]=0,this.playerdata_list_pos[1]=1,this.playerdata_list_pos[2]=2}},addPlayerNode:function(t){var e=cc.instantiate(this.player_node_prefabs);e.parent=this.node,this.playerNodeList.push(e);var o=this.playerdata_list_pos[t.seatindex];console.log("index "+t.seatindex+" "+o),e.position=this.players_seat_pos.children[o].position,e.getComponent("player_node").init_data(t,o)},start:function(){},getUserOutCardPosByAccount:function(t){console.log("getUserOutCardPosByAccount accountid:"+t);for(var e=0;e<this.playerNodeList.length;e++){var o=this.playerNodeList[e];if(o){var a=o.getComponent("player_node");if(a.accountid===t){var n=this.players_seat_pos.children[a.seat_index],i="cardsoutzone"+a.seat_index;return n.getChildByName(i)}}}return null}}),cc._RF.pop()},{}],gamebeforeUI:[function(t,e,o){"use strict";cc._RF.push(e,"34b69bK3SJBFbE0zzOU1X9M","gamebeforeUI"),cc.Class({extends:cc.Component,properties:{btn_ready:cc.Node,btn_gamestart:cc.Node},onLoad:function(){this.btn_gamestart.active=!1,this.btn_ready.active=!1,this.node.on("init",function(){console.log("game beforeui init"),console.log("window.myglobal.playerData.housemanageid"+window.myglobal.playerData.housemanageid),console.log("window.myglobal.playerData.accountID"+window.myglobal.playerData.accountID),window.myglobal.playerData.housemanageid==window.myglobal.playerData.accountID?(this.btn_gamestart.active=!0,this.btn_ready.active=!1):(this.btn_gamestart.active=!1,this.btn_ready.active=!0)}.bind(this)),window.myglobal.socket.onChangeHouseManage(function(t){console.log("gamebrforeUI onChangeHouseManage revice"+JSON.stringify(t)),window.myglobal.playerData.housemanageid=t,window.myglobal.playerData.housemanageid==window.myglobal.playerData.accountID?(this.btn_gamestart.active=!0,this.btn_ready.active=!1):(this.btn_gamestart.active=!1,this.btn_ready.active=!0)}.bind(this))},start:function(){},onButtonClick:function(t,e){switch(e){case"btn_ready":console.log("btn_ready"),window.myglobal.socket.requestReady();break;case"btn_start":console.log("btn_start"),window.myglobal.socket.requestStart(function(t,e){0!=t?console.log("requestStart err"+t):console.log("requestStart data"+JSON.stringify(e))})}}}),cc._RF.pop()},{}],gameingUI:[function(t,e,o){"use strict";cc._RF.push(e,"fc5fbLb+LFG+rCIt1gYkSVX","gameingUI"),cc.Class({extends:cc.Component,properties:{gameingUI:cc.Node,card_prefab:cc.Prefab,robUI:cc.Node,bottom_card_pos_node:cc.Node,playingUI_node:cc.Node,tipsLabel:cc.Label},onLoad:function(){this.cards_nods=[],this.card_width=0,this.rob_player_accountid=0,this.fapai_end=!1,this.bottom_card=[],this.bottom_card_data=[],this.choose_card_data=[],this.outcar_zone=[],this.push_card_tmp=[],window.myglobal.socket.onPushCards(function(t){console.log("onPushCards"+JSON.stringify(t)),this.card_data=t,this.cur_index_card=t.length-1,this.pushCard(t),isopen_sound&&console.log("start fapai_audioID"+this.fapai_audioID),this.scheduleOnce(this._runactive_pushcard.bind(this),.3),this.node.parent.emit("pushcard_other_event")}.bind(this)),window.myglobal.socket.onCanRobState(function(t){console.log("onCanRobState"+JSON.stringify(t)),this.rob_player_accountid=t,t==window.myglobal.playerData.accountID&&1==this.fapai_end&&(this.robUI.active=!0)}.bind(this)),window.myglobal.socket.onCanChuCard(function(t){console.log("onCanRobState"+JSON.stringify(t)),t==window.myglobal.playerData.accountID&&(this.clearOutZone(window.myglobal.playerData.accountID),this.playingUI_node.active=!0)}.bind(this)),window.myglobal.socket.onOtherPlayerChuCard(function(t){console.log("onOtherPlayerChuCard"+JSON.stringify(t));var e=t.accountid,o=this.node.parent.getComponent("gameScene").getUserOutCardPosByAccount(e);if(null!=o){for(var a=[],n=0;n<t.cards.length;n++){var i=cc.instantiate(this.card_prefab);i.getComponent("card").showCards(t.cards[n].card_data,window.myglobal.playerData.accountID),a.push(i)}this.appendOtherCardsToOutZone(o,a,0)}}.bind(this)),this.node.on("show_bottom_card_event",function(t){console.log("----show_bottom_card_event",+t),this.bottom_card_data=t;for(var e=0;e<t.length;e++){var o=this.bottom_card[e],a=t[e],n={obj:o,data:a};console.log("bottom show_data:"+JSON.stringify(a));var i=cc.callFunc(function(t,e){var o=e.obj,a=e.data;o.getComponent("card").showCards(a)},this,n);o.runAction(cc.sequence(cc.rotateBy(0,0,180),cc.rotateBy(.2,0,-90),i,cc.rotateBy(.2,0,-90),cc.scaleBy(1,1.2))),isopen_sound&&cc.audioEngine.play(cc.url.raw("resources/sound/start.mp3"))}window.myglobal.playerData.accountID==window.myglobal.playerData.master_accountid&&this.scheduleOnce(this.pushThreeCard.bind(this),.2)}.bind(this)),this.node.on("choose_card_event",function(t){console.log("choose_card_event:"+JSON.stringify(t));var e=t;this.choose_card_data.push(e)}.bind(this)),this.node.on("unchoose_card_event",function(t){console.log("unchoose_card_event:"+t);for(var e=t,o=0;o<this.choose_card_data.length;o++)this.choose_card_data[o].cardid==e&&this.choose_card_data.splice(o,1)}.bind(this))},start:function(){},_runactive_pushcard:function(){if(this.cur_index_card<0){console.log("pushcard end"),this.fapai_end=!0,this.rob_player_accountid==window.myglobal.playerData.accountID&&(this.robUI.active=!0),isopen_sound&&cc.audioEngine.stop(this.fapai_audioID);var t=this.rob_player_accountid;this.node.parent.emit("canrob_event",t)}else{(o=this.cards_nods[this.cards_nods.length-this.cur_index_card-1]).active=!0,this.push_card_tmp.push(o),this.fapai_audioID=cc.audioEngine.play(cc.url.raw("resources/sound/fapai1.mp3"));for(var e=0;e<this.push_card_tmp.length-1;e++){var o,a=(o=this.push_card_tmp[e]).x-.4*this.card_width,n=cc.moveTo(.1,cc.v2(a,-250));o.runAction(n)}this.cur_index_card--,this.scheduleOnce(this._runactive_pushcard.bind(this),.3)}},sortCard:function(){this.cards_nods.sort(function(t,e){var o=t.getComponent("card").card_data,a=e.getComponent("card").card_data;return o.hasOwnProperty("value")&&a.hasOwnProperty("value")?a.value-o.value:o.hasOwnProperty("king")&&!a.hasOwnProperty("king")?-1:!o.hasOwnProperty("king")&&a.hasOwnProperty("king")?1:o.hasOwnProperty("king")&&a.hasOwnProperty("king")?a.king-o.king:void 0});setTimeout(function(){var t=this.cards_nods[0].x;console.log("sort x:"+t);for(var e=0;e<this.cards_nods.length;e++){var o=this.cards_nods[e];o.zIndex=e,o.x=t+.4*o.width*e}}.bind(this),1e3)},pushCard:function(t){t&&t.sort(function(t,e){return t.hasOwnProperty("value")&&e.hasOwnProperty("value")?e.value-t.value:t.hasOwnProperty("king")&&!e.hasOwnProperty("king")?-1:!t.hasOwnProperty("king")&&e.hasOwnProperty("king")?1:t.hasOwnProperty("king")&&e.hasOwnProperty("king")?e.king-t.king:void 0}),this.cards_nods=[];for(var e=0;e<17;e++){var o=cc.instantiate(this.card_prefab);o.scale=.8,o.parent=this.node.parent,o.x=.4*o.width*-.5*-16+.4*o.width*0,o.y=-250,o.active=!1,o.getComponent("card").showCards(t[e],window.myglobal.playerData.accountID),this.cards_nods.push(o),this.card_width=o.width}this.bottom_card=[];for(e=0;e<3;e++){var a=cc.instantiate(this.card_prefab);a.scale=.4,a.position=this.bottom_card_pos_node.position,0==e?a.x=a.x-.4*a.width:2==e&&(a.x=a.x+.4*a.width),a.parent=this.node.parent,this.bottom_card.push(a)}},schedulePushThreeCard:function(){for(var t=0;t<this.cards_nods.length;t++){var e=this.cards_nods[t];-230==e.y&&(e.y=-250)}},pushThreeCard:function(){for(var t=this.cards_nods[this.cards_nods.length-1].x,e=0;e<this.bottom_card_data.length;e++){var o=cc.instantiate(this.card_prefab);o.scale=.8,o.parent=this.node.parent,o.x=t+(e+1)*this.card_width*.4,o.y=-230,o.getComponent("card").showCards(this.bottom_card_data[e],window.myglobal.playerData.accountID),o.active=!0,this.cards_nods.push(o)}this.sortCard(),this.scheduleOnce(this.schedulePushThreeCard.bind(this),2)},destoryCard:function(t,e){if(0!=e.length){for(var o=[],a=0;a<e.length;a++)for(var n=0;n<this.cards_nods.length;n++){var i=this.cards_nods[n].getComponent("card").card_id;i==e[a].cardid&&(console.log("destroy card id:"+i),this.cards_nods[n].removeFromParent(!0),o.push(this.cards_nods[n]),this.cards_nods.splice(n,1))}this.appendCardsToOutZone(t,o),this.updateCards()}},clearOutZone:function(t){for(var e=this.node.parent.getComponent("gameScene").getUserOutCardPosByAccount(t),o=e.children,a=0;a<o.length;a++){o[a].destroy()}e.removeAllChildren(!0)},pushCardSort:function(t){1!=t.length&&t.sort(function(t,e){var o=t.getComponent("card").card_data,a=e.getComponent("card").card_data;return o.hasOwnProperty("value")&&a.hasOwnProperty("value")?a.value-o.value:o.hasOwnProperty("king")&&!a.hasOwnProperty("king")?-1:!o.hasOwnProperty("king")&&a.hasOwnProperty("king")?1:o.hasOwnProperty("king")&&a.hasOwnProperty("king")?a.king-o.king:void 0})},appendOtherCardsToOutZone:function(t,e,o){t.removeAllChildren(!0);for(var a=0;a<e.length;a++){var n=e[a];t.addChild(n,100+a)}var i=e.length/2;for(a=0;a<e.length;a++){var s=t.getChildren()[a],r=30*(a-i),c=s.y+o;s.setScale(.5,.5),s.setPosition(r,c)}},appendCardsToOutZone:function(t,e){if(0!=e.length){this.pushCardSort(e);var o=this.node.parent.getComponent("gameScene").getUserOutCardPosByAccount(t);this.appendOtherCardsToOutZone(o,e,360)}},updateCards:function(){for(var t=this.cards_nods.length/2,e=0;e<this.cards_nods.length;e++){var o=this.cards_nods[e],a=(e-t)*(.4*this.card_width);o.setPosition(a,-250)}},playPushCardSound:function(t){if(console.log("playPushCardSound:"+t),""!=t)switch(t){case CardsValue.one.name:break;case CardsValue.double.name:isopen_sound&&cc.audioEngine.play(cc.url.raw("resources/sound/duizi.mp3"))}},onButtonClick:function(t,e){switch(e){case"btn_qiandz":console.log("btn_qiandz"),window.myglobal.socket.requestRobState(qian_state.qian),this.robUI.active=!1,isopen_sound&&cc.audioEngine.play(cc.url.raw("resources/sound/woman_jiao_di_zhu.ogg"));break;case"btn_buqiandz":console.log("btn_buqiandz"),window.myglobal.socket.requestRobState(qian_state.buqiang),this.robUI.active=!1,isopen_sound&&cc.audioEngine.play(cc.url.raw("resources/sound/woman_bu_jiao.ogg"));break;case"nopushcard":window.myglobal.socket.request_buchu_card([],null),this.playingUI_node.active=!1;break;case"pushcard":0==this.choose_card_data.length&&(this.tipsLabel.string="\u8bf7\u9009\u62e9\u724c!",setTimeout(function(){this.tipsLabel.string=""}.bind(this),2e3)),window.myglobal.socket.request_chu_card(this.choose_card_data,function(t,e){if(t){console.log("request_chu_card:"+t),console.log("request_chu_card"+JSON.stringify(e)),""==this.tipsLabel.string&&(this.tipsLabel.string=e.msg,setTimeout(function(){this.tipsLabel.string=""}.bind(this),2e3));for(var o=0;o<this.cards_nods.length;o++){this.cards_nods[o].emit("reset_card_flag")}this.choose_card_data=[]}else console.log("resp_chu_card data:"+JSON.stringify(e)),this.playingUI_node.active=!1,this.playPushCardSound(e.cardvalue.name),this.destoryCard(e.account,this.choose_card_data),this.choose_card_data=[]}.bind(this))}}}),cc._RF.pop()},{}],hallScene:[function(t,e,o){"use strict";cc._RF.push(e,"9eee7bdCqVB/LXv3XqKAza9","hallScene"),cc.Class({extends:cc.Component,properties:{nickname_label:cc.Label,headimage:cc.Sprite,gobal_count:cc.Label,creatroom_prefabs:cc.Prefab,joinroom_prefabs:cc.Prefab},onLoad:function(){this.nickname_label=window.myglobal.playerData.nickName,this.gobal_count.string=":"+window.myglobal.playerData.gobal_count},start:function(){},onButtonClick:function(t,e){switch(e){case"create_room":var o=cc.instantiate(this.creatroom_prefabs);o.parent=this.node,o.zIndex=100;break;case"join_room":var a=cc.instantiate(this.joinroom_prefabs);a.parent=this.node,a.zIndex=100}}}),cc._RF.pop()},{}],joinRoom:[function(t,e,o){"use strict";cc._RF.push(e,"9b543i+qr1Px4nfSdBwSJcb","joinRoom");var a=function(t){return t&&t.__esModule?t:{default:t}}(t("../../mygolbal.js"));cc.Class({extends:cc.Component,properties:{joinids:{type:cc.Label,default:[]}},onLoad:function(){this.joinid="",this.cur_input_count=-1},start:function(){},onButtonClick:function(t,e){if(1===e.length){if(this.joinid+=e,this.cur_input_count+=1,this.joinids[this.cur_input_count].string=e,this.joinid.length>=6){var o={roomid:this.joinid};return void a.default.socket.request_jion(o,function(t,e){t?console.log("err"+t):(console.log("join room sucess"+JSON.stringify(e)),a.default.playerData.bottom=e.bottom,a.default.playerData.rate=e.rate,cc.director.loadScene("gameScene"))})}console.log("customData:"+e)}switch(e){case"back":if(this.cur_input_count<0)return;this.joinids[this.cur_input_count].string="",this.cur_input_count-=1,this.joinid=this.joinid.substring(0,this.joinid.length-1);break;case"clear":for(var n=0;n<6;++n)this.joinids[n].string="";this.joinid="",this.cur_input_count=-1;break;case"close":this.node.destroy()}}}),cc._RF.pop()},{"../../mygolbal.js":"mygolbal"}],loginScene:[function(t,e,o){"use strict";cc._RF.push(e,"b05a68gSOpBWr8ddvT03Jpj","loginScene"),cc.Class({extends:cc.Component,properties:{wait_node:cc.Node},onLoad:function(){isopen_sound&&cc.audioEngine.play(cc.url.raw("resources/sound/login_bg.ogg"),!0),window.myglobal.socket.initSocket()},start:function(){},onButtonCilck:function(t,e){switch(e){case"wx_login":console.log("wx_login request"),window.myglobal.socket.request_wxLogin({uniqueID:window.myglobal.playerData.uniqueID,accountID:window.myglobal.playerData.accountID,nickName:window.myglobal.playerData.nickName,avatarUrl:window.myglobal.playerData.avatarUrl},function(t,e){0==t?(console.log("login sucess"+JSON.stringify(e)),window.myglobal.playerData.gobal_count=e.goldcount,cc.director.loadScene("hallScene")):console.log("err:"+t)}.bind(this))}}}),cc._RF.pop()},{}],mygolbal:[function(t,e,o){"use strict";cc._RF.push(e,"d9667atqdBHIb60A67blB9L","mygolbal"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=s(t("./data/socket_ctr.js")),n=s(t("./data/player.js")),i=s(t("./util/event_lister.js"));function s(t){return t&&t.__esModule?t:{default:t}}var r={}||r;r.socket=(0,a.default)(),r.playerData=(0,n.default)(),r.eventlister=(0,i.default)({}),window.myglobal=r;var c=r;o.default=c,e.exports=o.default,cc._RF.pop()},{"./data/player.js":"player","./data/socket_ctr.js":"socket_ctr","./util/event_lister.js":"event_lister"}],player_node:[function(t,e,o){"use strict";cc._RF.push(e,"aa64aMZgnFIfLx2Lmi+lbwV","player_node");var a=function(t){return t&&t.__esModule?t:{default:t}}(t("../../mygolbal.js"));cc.Class({extends:cc.Component,properties:{account_label:cc.Label,nickname_label:cc.Label,room_touxiang:cc.Sprite,globalcount_label:cc.Label,headimage:cc.Sprite,readyimage:cc.Node,offlineimage:cc.Node,card_node:cc.Node,card_prefab:cc.Prefab,clockimage:cc.Node,qiangdidzhu_node:cc.Node,time_label:cc.Label,robimage_sp:cc.SpriteFrame,robnoimage_sp:cc.SpriteFrame,robIconSp:cc.Sprite,robIcon_Sp:cc.Node,robnoIcon_Sp:cc.Node,masterIcon:cc.Node},onLoad:function(){this.readyimage.active=!1,this.offlineimage.active=!1,this.node.on("gamestart_event",function(t){this.readyimage.active=!1}.bind(this)),this.node.on("push_card_event",function(t){console.log("on push_card_event"),this.accountid!=a.default.playerData.accountID&&this.pushCard()}.bind(this)),this.node.on("playernode_rob_state_event",function(t){var e=t;e.accountid==this.accountid&&(this.qiangdidzhu_node.active=!1),this.accountid==e.accountid&&(e.state==qian_state.qian?(console.log("this.robIcon_Sp.active = true"),this.robIcon_Sp.active=!0):e.state==qian_state.buqiang?this.robnoIcon_Sp.active=!0:console.log("get rob value :"+e.state))}.bind(this)),this.node.on("playernode_changemaster_event",function(t){var e=t;this.robIcon_Sp.active=!1,this.robnoIcon_Sp.active=!1,e==this.accountid&&(this.masterIcon.active=!0)}.bind(this))},start:function(){},init_data:function(t,e){console.log("init_data:"+JSON.stringify(t)),this.accountid=t.accountid,this.account_label.string=t.accountid,this.nickname_label.string=t.nick_name,this.globalcount_label.string=t.goldcount,this.cardlist_node=[],this.seat_index=e,1==t.isready&&(this.readyimage.active=!0);var o="UI/headimage/"+t.avatarUrl;cc.loader.loadRes(o,cc.SpriteFrame,function(t,e){t?console.log(t.message||t):this.headimage.spriteFrame=e}.bind(this)),this.node.on("player_ready_notify",function(t){console.log("player_ready_notify event",t);var e=t;console.log("------player_ready_notify detail:"+e),e==this.accountid&&(this.readyimage.active=!0)}.bind(this)),this.node.on("playernode_canrob_event",function(t){var e=t;console.log("------playernode_canrob_event detail:"+e),e==this.accountid&&(this.qiangdidzhu_node.active=!0,this.time_label.string="10")}.bind(this)),1==e&&(this.card_node.x=-this.card_node.x-30)},pushCard:function(){this.card_node.active=!0;for(var t=0;t<17;t++){var e=cc.instantiate(this.card_prefab);e.scale=.6,console.log(" this.card_node.parent.parent"+this.card_node.parent.parent.name),e.parent=this.card_node;var o=e.height;e.y=8*o*.4*.3-.4*o*.3*t,e.x=0,this.cardlist_node.push(e)}}}),cc._RF.pop()},{"../../mygolbal.js":"mygolbal"}],player:[function(t,e,o){"use strict";cc._RF.push(e,"ec2a0fYPv1ASr8YTOKp3Np/","player"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=function(t){for(var e="",o=0;o<t;o++)e+=Math.floor(10*Math.random());return e},n=function(){var t={};t.uniqueID=1+a(6),t.accountID="2"+a(6),t.nickName="tiny"+a(3);var e="avatar_"+(Math.floor(3*Math.random())+1);return t.avatarUrl=e,t.gobal_count=0,t.master_accountid=0,t};o.default=n,e.exports=o.default,cc._RF.pop()},{}],socket_ctr:[function(t,e,o){"use strict";cc._RF.push(e,"9ce03TvsElJsaLzLDlseCff","socket_ctr"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=function(t){return t&&t.__esModule?t:{default:t}}(t("../util/event_lister.js"));var n=function(){var t={},e={},o=0,n=null,i=(0,a.default)({}),s=function(t,e,o){n.emit("notify",{cmd:t,data:e,callindex:o})},r=function(t,a,n){console.log("send cmd:"+t+"  "+JSON.stringify(a)),e[++o]=n,s(t,a,o)};return t.initSocket=function(){(n=window.io.connect(defines.serverUrl,{reconnection:!1,"force new connection":!0,transports:["websocket","polling"]})).on("connection",function(){console.log("connect server success!!")}),n.on("notify",function(t){if(console.log("on notify cmd:"+JSON.stringify(t)),e.hasOwnProperty(t.callBackIndex)){var o=e[t.callBackIndex];o&&o(t.result,t.data)}else{var a=t.type;i.fire(a,t.data)}})},t.request_wxLogin=function(t,e){r("wxlogin",t,e)},t.request_creatroom=function(t,e){r("createroom_req",t,e)},t.request_jion=function(t,e){r("joinroom_req",t,e)},t.request_enter_room=function(t,e){r("enterroom_req",t,e)},t.request_buchu_card=function(t,e){r("chu_bu_card_req",t,e)},t.request_chu_card=function(t,e){r("chu_card_req",t,e)},t.onPlayerJoinRoom=function(t){i.on("player_joinroom_notify",t)},t.onPlayerReady=function(t){i.on("player_ready_notify",t)},t.onGameStart=function(t){t&&i.on("gameStart_notify",t)},t.onChangeHouseManage=function(t){t&&i.on("changehousemanage_notify",t)},t.requestReady=function(){s("player_ready_notify",{},null)},t.requestStart=function(t){r("player_start_notify",{},t)},t.requestRobState=function(t){s("player_rob_notify",t,null)},t.onPushCards=function(t){t&&i.on("pushcard_notify",t)},t.onCanRobState=function(t){t&&i.on("canrob_notify",t)},t.onRobState=function(t){t&&i.on("canrob_state_notify",t)},t.onChangeMaster=function(t){t&&i.on("change_master_notify",t)},t.onShowBottomCard=function(t){t&&i.on("change_showcard_notify",t)},t.onCanChuCard=function(t){t&&i.on("can_chu_card_notify",t)},t.onRoomChangeState=function(t){t&&i.on("room_state_notify",t)},t.onOtherPlayerChuCard=function(t){t&&i.on("other_chucard_notify",t)},t};o.default=n,e.exports=o.default,cc._RF.pop()},{"../util/event_lister.js":"event_lister"}],"use_v2.0.x_cc.Toggle_event":[function(t,e,o){"use strict";cc._RF.push(e,"b2dd9qK/xtL94k9GLQZ9fq6","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}],waitnode:[function(t,e,o){"use strict";cc._RF.push(e,"17318Pv1MxELb6d+o/SHo0s","waitnode"),cc.Class({extends:cc.Component,properties:{loadimage_target:cc.Node,_isShow:!1,lblContent:cc.Label},start:function(){this.node.active=this._isShow},update:function(t){this.loadimage_target.rotation=this.loadimage_target.rotation-45*t},show:function(t){this._isShow=!0,this.node&&(this.node.active=this._isShow),this.lblContent&&(null==t&&(t=""),this.lblContent.string=t)},hide:function(){this._isShow=!1,this.node&&(this.node.active=this._isShow)}}),cc._RF.pop()},{}]},{},["use_v2.0.x_cc.Toggle_event","player","socket_ctr","gameScene","gamebeforeUI","gameingUI","card","player_node","hallScene","creatRoom","joinRoom","loginScene","mygolbal","event_lister","waitnode"]);